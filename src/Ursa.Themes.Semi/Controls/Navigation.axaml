<ResourceDictionary
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="clr-namespace:Ursa.Themes.Semi.Converters"
    xmlns:u="https://irihi.tech/ursa">
    <!--  Add Resources Here  -->

    <converters:NavigationMenuItemLevelToMarginConverter x:Key="MarginConverter" Indent="8" />

    <ControlTheme x:Key="{x:Type u:NavigationMenu}" TargetType="u:NavigationMenu">
        <Setter Property="VerticalAlignment" Value="Stretch" />
        <Setter Property="Template">
            <ControlTemplate TargetType="u:NavigationMenu">
                <Border
                    Name="PART_RootBorder"
                    Width="260"
                    HorizontalAlignment="{TemplateBinding HorizontalAlignment}"
                    Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    CornerRadius="{TemplateBinding CornerRadius}">
                    <Border.Transitions>
                        <Transitions>
                            <DoubleTransition Property="Width" Duration="0:0:0.2" />
                        </Transitions>
                    </Border.Transitions>
                    <Grid
                        Name="PART_RootGrid"
                        HorizontalAlignment="Stretch"
                        Background="{TemplateBinding Background}"
                        RowDefinitions="Auto, *, Auto, Auto">
                        <StackPanel
                            Margin="18"
                            HorizontalAlignment="Center"
                            Orientation="Horizontal">
                            <ContentPresenter
                                Name="PART_IconPresenter"
                                Margin="0,8"
                                VerticalAlignment="Center"
                                Content="{TemplateBinding Icon}" />
                            <ContentPresenter
                                Name="PART_HeaderPresenter"
                                VerticalAlignment="Center"
                                Content="{TemplateBinding Header}"
                                ContentTemplate="{TemplateBinding HeaderTemplate}"
                                FontSize="18" />

                        </StackPanel>
                        <ItemsPresenter Grid.Row="1" ItemsPanel="{TemplateBinding ItemsPanel}" />
                        <ContentPresenter
                            Name="PART_FooterPresenter"
                            Grid.Row="2"
                            Content="{TemplateBinding Footer}"
                            ContentTemplate="{TemplateBinding FooterTemplate}" />
                        <ToggleButton
                            Name="{x:Static u:NavigationMenu.PART_CloseButton}"
                            Grid.Row="3"
                            Content="Open"
                            IsChecked="{TemplateBinding IsClosed,
                                                        Mode=TwoWay}"
                            IsVisible="{TemplateBinding ShowCollapseButton}" />
                    </Grid>
                </Border>
            </ControlTemplate>
        </Setter>
        <Style Selector="^:closed">
            <Style Selector="^ /template/ ContentPresenter#PART_HeaderPresenter">
                <Setter Property="ContentPresenter.IsVisible" Value="False" />
            </Style>
            <Style Selector="^ /template/ Border#PART_RootBorder">
                <Setter Property="Border.Width" Value="60" />
            </Style>
            <Style Selector="^ /template/ ContentPresenter#PART_IconPresenter">
                <Setter Property="Grid.HorizontalAlignment" Value="Center" />
            </Style>
        </Style>
    </ControlTheme>

    <ControlTheme x:Key="{x:Type u:NavigationMenuItem}" TargetType="u:NavigationMenuItem">
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Template">
            <ControlTemplate TargetType="u:NavigationMenuItem">
                <Border>
                    <StackPanel>
                        <Border
                            Name="PART_HeaderBorder"
                            Margin="0,2"
                            Padding="8"
                            Background="Transparent"
                            CornerRadius="6">
                            <Grid
                                Name="PART_RootStackPanel"
                                HorizontalAlignment="Stretch"
                                ColumnDefinitions="Auto, Auto, *, Auto">
                                <ContentPresenter
                                    Name="PART_IconPresenter"
                                    Grid.Column="1"
                                    MinWidth="32"
                                    Margin="{TemplateBinding Level,
                                                             Converter={StaticResource MarginConverter}}"
                                    Content="{TemplateBinding Icon}"
                                    ContentTemplate="{TemplateBinding IconTemplate}" />
                                <ContentPresenter
                                    Name="PART_HeaderPresenter"
                                    Grid.Column="2"
                                    VerticalAlignment="Center"
                                    Background="{TemplateBinding Background}"
                                    Content="{TemplateBinding Header}"
                                    ContentTemplate="{TemplateBinding HeaderTemplate}">
                                    <ContentPresenter.Transitions>
                                        <Transitions>
                                            <DoubleTransition Property="Opacity" Duration="0:0:0.15" />
                                        </Transitions>
                                    </ContentPresenter.Transitions>
                                </ContentPresenter>
                                <PathIcon
                                    Name="PART_ExpandIcon"
                                    Grid.Column="3"
                                    Width="8"
                                    Height="8"
                                    Data="M4.08045 7.59809C4.66624 7.01231 5.61599 7.01231 6.20177 7.59809L11.8586 13.2549L17.5155 7.59809C18.1013 7.01231 19.051 7.01231 19.6368 7.59809C20.2226 8.18388 20.2226 9.13363 19.6368 9.71941L12.9193 16.4369C12.3335 17.0227 11.3838 17.0227 10.798 16.4369L4.08045 9.71941C3.49467 9.13363 3.49467 8.18388 4.08045 7.59809Z">
                                    <PathIcon.Transitions>
                                        <Transitions>
                                            <TransformOperationsTransition Property="RenderTransform" Duration="0.1" />
                                        </Transitions>
                                    </PathIcon.Transitions>
                                </PathIcon>
                            </Grid>
                        </Border>
                        <ItemsPresenter Name="PART_ItemsPresenter" ItemsPanel="{TemplateBinding ItemsPanel}">
                            <ItemsPresenter.Transitions>
                                <Transitions>
                                    <DoubleTransition Property="Height" Duration="0:0:0.15" />
                                    <DoubleTransition Property="Opacity" Duration="0:0:0.15" />
                                </Transitions>
                            </ItemsPresenter.Transitions>
                        </ItemsPresenter>
                    </StackPanel>
                </Border>
            </ControlTemplate>
        </Setter>
        <Style Selector="^ /template/ Border#PART_HeaderBorder:pointerover">
            <Setter Property="Border.Background" Value="LightGray" />
        </Style>
        <Style Selector="^:highlighted /template/ ContentPresenter#PART_IconPresenter">
            <Setter Property="u:NavigationMenuItem.Foreground" Value="Blue" />
        </Style>
        <Style Selector="^:selected /template/ Border#PART_HeaderBorder">
            <Setter Property="u:NavigationMenuItem.Background" Value="LightBlue" />
        </Style>
        <Style Selector="^:closed /template/ ContentPresenter#PART_HeaderPresenter">
            <Setter Property="ContentPresenter.Opacity" Value="0" />
        </Style>
        <Style Selector="^:closed /template/ StackPanel#PART_RootStackPanel">
            <Setter Property="StackPanel.HorizontalAlignment" Value="Center" />
        </Style>
        <Style Selector="^:closed /template/ ItemsPresenter#PART_ItemsPresenter">
            <Setter Property="ItemsPresenter.IsVisible" Value="False" />
        </Style>
        <Style Selector="^:collapsed /template/ ItemsPresenter#PART_ItemsPresenter">
            <Setter Property="ItemsPresenter.Height" Value="0" />
            <Setter Property="ItemsPresenter.Opacity" Value="0" />
        </Style>
        <Style Selector="^:not(:empty):collapsed /template/ PathIcon#PART_ExpandIcon">
            <Setter Property="PathIcon.RenderTransform" Value="rotate(180deg)" />
        </Style>
        <Style Selector="^:empty /template/ PathIcon#PART_ExpandIcon">
            <Setter Property="PathIcon.IsVisible" Value="False" />
        </Style>
    </ControlTheme>
</ResourceDictionary>
